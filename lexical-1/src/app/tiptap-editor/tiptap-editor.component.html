<div class="tiptap-wrapper row">
  <h2>Tiptap Rich Text Editor</h2>

  <div class="toolbar">
    <div class="toolbar-group">
      <button
        type="button"
        class="toolbar-button"
        title="Bold (Ctrl+B)"
        (mousedown)="$event.preventDefault()"
        (click)="toggleBold()"
        [class.active]="isActive('bold')">
        <strong>B</strong>
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Italic (Ctrl+I)"
        (mousedown)="$event.preventDefault()"
        (click)="toggleItalic()"
        [class.active]="isActive('italic')">
        <em>I</em>
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Strikethrough"
        (mousedown)="$event.preventDefault()"
        (click)="toggleStrike()"
        [class.active]="isActive('strike')">
        <s>S</s>
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Inline Code"
        (mousedown)="$event.preventDefault()"
        (click)="toggleCode()"
        [class.active]="isActive('code')">
        &lt;/&gt;
      </button>
    </div>

    <div class="toolbar-divider"></div>

    <div class="toolbar-group">
      <button
        type="button"
        class="toolbar-button"
        title="Paragraph"
        (mousedown)="$event.preventDefault()"
        (click)="setParagraph()"
        [class.active]="isActive('paragraph')">
        ¶
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Heading 1"
        (mousedown)="$event.preventDefault()"
        (click)="toggleHeading(1)"
        [class.active]="isActive('heading', { level: 1 })">
        H1
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Heading 2"
        (mousedown)="$event.preventDefault()"
        (click)="toggleHeading(2)"
        [class.active]="isActive('heading', { level: 2 })">
        H2
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Heading 3"
        (mousedown)="$event.preventDefault()"
        (click)="toggleHeading(3)"
        [class.active]="isActive('heading', { level: 3 })">
        H3
      </button>
    </div>

    <div class="toolbar-divider"></div>

    <div class="toolbar-group">
      <button
        type="button"
        class="toolbar-button"
        title="Bullet List"
        (mousedown)="$event.preventDefault()"
        (click)="toggleBulletList()"
        [class.active]="isActive('bulletList')">
        • List
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Ordered List"
        (mousedown)="$event.preventDefault()"
        (click)="toggleOrderedList()"
        [class.active]="isActive('orderedList')">
        1. List
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Blockquote"
        (mousedown)="$event.preventDefault()"
        (click)="toggleBlockquote()"
        [class.active]="isActive('blockquote')">
        “”
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Code Block"
        (mousedown)="$event.preventDefault()"
        (click)="toggleCodeBlock()"
        [class.active]="isActive('codeBlock')">
        Code
      </button>
    </div>

    <div class="toolbar-divider"></div>

    <div class="toolbar-group">
      <button
        type="button"
        class="toolbar-button"
        title="Horizontal Rule"
        (mousedown)="$event.preventDefault()"
        (click)="insertHorizontalRule()">
        ―
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Line Break"
        (mousedown)="$event.preventDefault()"
        (click)="insertHardBreak()">
        ⏎
      </button>
    </div>

    <div class="toolbar-divider"></div>

    <div class="toolbar-group">
      <button
        type="button"
        class="toolbar-button"
        title="Undo (Ctrl+Z)"
        (mousedown)="$event.preventDefault()"
        (click)="undo()">
        ↶
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Redo (Ctrl+Y)"
        (mousedown)="$event.preventDefault()"
        (click)="redo()">
        ↷
      </button>
      <button
        type="button"
        class="toolbar-button"
        title="Clear Formatting"
        (mousedown)="$event.preventDefault()"
        (click)="clearFormatting()">
        ✕
      </button>
    </div>
  </div>

  <div class="editor-container">
    <tiptap-editor
      class="tiptap-content"
      [editor]="editor"
      [(ngModel)]="content"
      outputFormat="html">
    </tiptap-editor>

    <tiptap-bubble-menu class="bubble-menu" [editor]="editor">
      <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleBold()" [class.active]="isActive('bold')">
        Bold
      </button>
      <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleItalic()" [class.active]="isActive('italic')">
        Italic
      </button>
      <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleStrike()" [class.active]="isActive('strike')">
        Strike
      </button>
      <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleCode()" [class.active]="isActive('code')">
        Code
      </button>
    </tiptap-bubble-menu>

    <tiptap-floating-menu class="floating-menu" [editor]="editor">
      <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleHeading(2)">
        Toggle H2
      </button>
      <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleBulletList()">
        Bullet List
      </button>
      <button type="button" (mousedown)="$event.preventDefault()" (click)="toggleOrderedList()">
        Ordered List
      </button>
    </tiptap-floating-menu>
  </div>
</div>

<div class="row html-output">
  <h3>HTML Output:</h3>
  <div class="html-container">
    <pre><code>{{ htmlOutput }}</code></pre>
  </div>
</div>
